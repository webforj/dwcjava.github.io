"use strict";(self.webpackChunkdwcj_documentation=self.webpackChunkdwcj_documentation||[]).push([[7484],{18518:(e,i,n)=>{n.r(i),n.d(i,{assets:()=>d,contentTitle:()=>r,default:()=>h,frontMatter:()=>a,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"introduction/tutorial/scaling-with-routing-and-composites","title":"Scaling with Routing and Composites","description":"This step focuses on implementing routing to enhance the scalability and organization of the app structure. To achieve this, the app will be updated to handle multiple views, allowing navigation between different functionalities such as editing and creating customer entries. It will outline creating views for these functionalities, using components like Composite to build modular and reusable layouts.","source":"@site/docs/introduction/tutorial/scaling-with-routing-and-composites.md","sourceDirName":"introduction/tutorial","slug":"/introduction/tutorial/scaling-with-routing-and-composites","permalink":"/docs/introduction/tutorial/scaling-with-routing-and-composites","draft":false,"unlisted":false,"editUrl":"https://github.com/webforj/webforj-docs/tree/website/docs/introduction/tutorial/scaling-with-routing-and-composites.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"title":"Scaling with Routing and Composites","sidebar_position":4},"sidebar":"documentationSidebar","previous":{"title":"Working With Data","permalink":"/docs/introduction/tutorial/working-with-data"},"next":{"title":"Validating and Binding Data","permalink":"/docs/introduction/tutorial/validating-and-binding-data"}}');var s=n(74848),o=n(28453);const a={title:"Scaling with Routing and Composites",sidebar_position:4},r=void 0,d={},c=[{value:"Routing",id:"routing",level:2},{value:"Changing the <code>App</code> class",id:"changing-the-app-class",level:3},{value:"Creating files for the views and configuring routes",id:"creating-files-for-the-views-and-configuring-routes",level:3},{value:"Using <code>Composite</code> components to display pages",id:"using-composite-components-to-display-pages",level:2},{value:"Connecting the routes",id:"connecting-the-routes",level:2},{value:"Button navigation",id:"button-navigation",level:3},{value:"Table editing",id:"table-editing",level:3},{value:"Handling initialization with <code>onDidEnter</code>",id:"handling-initialization-with-ondidenter",level:3},{value:"Submitting data",id:"submitting-data",level:3},{value:"Using <code>commit()</code>",id:"using-commit",level:3}];function l(e){const i={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",mdxAdmonitionTitle:"mdxAdmonitionTitle",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(i.p,{children:["This step focuses on implementing routing to enhance the scalability and organization of the app structure. To achieve this, the app will be updated to handle multiple views, allowing navigation between different functionalities such as editing and creating customer entries. It will outline creating views for these functionalities, using components like ",(0,s.jsx)(i.code,{children:"Composite"})," to build modular and reusable layouts."]}),"\n",(0,s.jsxs)(i.p,{children:["The app created in the ",(0,s.jsx)(i.a,{href:"./working-with-data",children:"previous step"})," will have a routing setup that supports multiple views, enabling users to manage customer data more effectively while maintaining a clean and scalable codebase."]}),"\n",(0,s.jsx)(i.p,{children:(0,s.jsx)(i.img,{alt:"Routing app first frame",src:n(59936).A+"",width:"892",height:"445"})}),"\n",(0,s.jsx)("br",{}),"\n",(0,s.jsx)(i.p,{children:(0,s.jsx)(i.img,{alt:"Routing app second frame",src:n(41147).A+"",width:"892",height:"326"})}),"\n",(0,s.jsx)(i.h2,{id:"routing",children:"Routing"}),"\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.a,{href:"../../routing/overview",children:"Routing"})," is the mechanism that allows your app to manage navigation between different views or pages. Instead of keeping all logic and behavior in a single location, routing enables you to break your app into smaller, focused component."]}),"\n",(0,s.jsx)(i.p,{children:"At its core, routing connects specific URLs to the views or components that handle those URLs. When a user interacts with your app\u2014such as clicking a button or entering a URL directly in their browser\u2014the router resolves the URL to the appropriate view, initializes it, and displays it on the screen. This approach makes it easy to manage navigation and maintain the app's state."}),"\n",(0,s.jsxs)(i.p,{children:["This step focuses on changing the ",(0,s.jsx)(i.code,{children:"App"})," class, creating files for the views, and configuring routes to enable smooth navigation between different parts of your app."]}),"\n",(0,s.jsxs)(i.p,{children:["Instead of placing all logic within the ",(0,s.jsx)(i.code,{children:"run()"})," method of ",(0,s.jsx)(i.code,{children:"App"}),", views like ",(0,s.jsx)(i.code,{children:"DemoView"})," and ",(0,s.jsx)(i.code,{children:"FormView"})," are implemented as separate classes. This approach more closely aligns with standard Java practices."]}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"DemoView"}),": Handles displaying the table and navigating to ",(0,s.jsx)(i.code,{children:"FormView"}),"."]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"FormView"}),": Manages adding and editing customer data."]}),"\n"]}),"\n",(0,s.jsxs)(i.h3,{id:"changing-the-app-class",children:["Changing the ",(0,s.jsx)(i.code,{children:"App"})," class"]}),"\n",(0,s.jsxs)(i.p,{children:["To enable routing in your app, update the ",(0,s.jsx)(i.code,{children:"App"})," class with the ",(0,s.jsx)(i.code,{children:"@Routify"})," annotation. This tells webforJ to activate routing and scan specified packages for route-enabled views."]}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-java",metastring:'title="DemoApplication.java" {1}',children:'@Routify(packages = "com.webforj.demos.views", debug = true)\npublic class DemoApplication extends App {  \n}\n'})}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:(0,s.jsx)(i.code,{children:"packages"})}),": Specifies which packages are scanned for views that define routes."]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:(0,s.jsx)(i.code,{children:"debug"})}),": Enables debugging mode for easier troubleshooting during development."]}),"\n"]}),"\n",(0,s.jsx)(i.h3,{id:"creating-files-for-the-views-and-configuring-routes",children:"Creating files for the views and configuring routes"}),"\n",(0,s.jsxs)(i.p,{children:["Once routing has been enabled, separate Java files for each view the app will contain are created, in this case, ",(0,s.jsx)(i.code,{children:"DemoView.java"})," and ",(0,s.jsx)(i.code,{children:"FormView.java"}),". Unique routes are assigned to these views using the ",(0,s.jsx)(i.code,{children:"@Route"})," annotation. This ensures that each view is accessible through a specific URL."]}),"\n",(0,s.jsxs)(i.p,{children:["When the ",(0,s.jsx)(i.code,{children:"@Route"})," annotation associated with a class with one of these suffixes has no value, webforJ automatically assigns the class's name without the suffix as the route. For example, ",(0,s.jsx)(i.code,{children:"DemoView"})," will map the route ",(0,s.jsx)(i.code,{children:"/demo"})," by default. Since in this case ",(0,s.jsx)(i.code,{children:"DemoView"})," is supposed to be the default route tho you will assign it a route."]}),"\n",(0,s.jsxs)(i.p,{children:["The ",(0,s.jsx)(i.code,{children:"/"})," route serves as the default entry point for your app. Assigning this route to a view ensures that it's the first page users see when accessing the app. In most cases, a dashboard or summary view is assigned to ",(0,s.jsx)(i.code,{children:"/"}),"."]}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-java",metastring:'title="DemoView.java" {1}',children:'@Route("/")\n@FrameTitle("Demo")\npublic class DemoView extends Composite<Div> {\n  // DemoView logic\n}\n'})}),"\n",(0,s.jsxs)(i.admonition,{type:"info",children:[(0,s.jsx)(i.mdxAdmonitionTitle,{}),(0,s.jsxs)(i.p,{children:["More information regarding the different route types is available ",(0,s.jsx)(i.a,{href:"../../routing/defining-routes",children:"here"}),"."]})]}),"\n",(0,s.jsxs)(i.p,{children:["For the ",(0,s.jsx)(i.code,{children:"FormView"})," the route ",(0,s.jsx)(i.code,{children:"customer/:id?"})," uses an optional parameter ",(0,s.jsx)(i.code,{children:"id"})," to determine the mode of the ",(0,s.jsx)(i.code,{children:"FormView"}),"."]}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Add Mode"}),": When ",(0,s.jsx)(i.code,{children:"id"})," isn't provided, ",(0,s.jsx)(i.code,{children:"FormView"})," initializes with a blank form for adding new customer data."]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Edit Mode"}),": When ",(0,s.jsx)(i.code,{children:"id"})," is provided, ",(0,s.jsx)(i.code,{children:"FormView"})," fetches the corresponding customer\u2019s data using ",(0,s.jsx)(i.code,{children:"Service"})," and pre-fills the form, allowing edits to be made to the existing entry."]}),"\n"]}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-java",metastring:'title="FormView.java" {1}',children:'@Route("customer/:id?")\n@FrameTitle("Customer Form")\npublic class FormView extends Composite<Div> implements DidEnterObserver {\n  // FormView logic\n}\n'})}),"\n",(0,s.jsxs)(i.admonition,{type:"info",children:[(0,s.jsx)(i.mdxAdmonitionTitle,{}),(0,s.jsxs)(i.p,{children:["More information regarding the different ways to implement those route patterns is available ",(0,s.jsx)(i.a,{href:"../../routing/route-patterns",children:"here"}),"."]})]}),"\n",(0,s.jsxs)(i.h2,{id:"using-composite-components-to-display-pages",children:["Using ",(0,s.jsx)(i.code,{children:"Composite"})," components to display pages"]}),"\n",(0,s.jsxs)(i.p,{children:["Composite components in webforJ, such as ",(0,s.jsx)(i.code,{children:"Composite<Div>"}),", allow you to encapsulate UI logic and structure within a reusable container. By extending ",(0,s.jsx)(i.code,{children:"Composite"}),", you limit the methods and data exposed to the rest of the app, ensuring cleaner code and better encapsulation."]}),"\n",(0,s.jsxs)(i.p,{children:["For example, ",(0,s.jsx)(i.code,{children:"DemoView"})," extends ",(0,s.jsx)(i.code,{children:"Composite<Div>"})," instead of directly extending ",(0,s.jsx)(i.code,{children:"Div"}),":"]}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-java",metastring:'title="DemoView.java"',children:'public class DemoView extends Composite<Div> {\n  private Table<Customer> table = new Table<>();\n  private Button add = new Button("Add Customer", ButtonTheme.PRIMARY);  \n\n  public DemoView() {\n    setupLayout();\n  }\n\n  private void setupLayout() {\n    FlexLayout layout = FlexLayout.create(table, add)\n        .vertical().contentAlign().center().build().setPadding("var(--dwc-space-l)");\n    getBoundComponent().add(layout);\n  }\n}\n'})}),"\n",(0,s.jsx)(i.h2,{id:"connecting-the-routes",children:"Connecting the routes"}),"\n",(0,s.jsx)(i.p,{children:"After configuring routing and setting up views, connect the views and data using event listeners and service methods. The first step is to add one or more\nUI elements to navigate from one view to the other."}),"\n",(0,s.jsx)(i.h3,{id:"button-navigation",children:"Button navigation"}),"\n",(0,s.jsxs)(i.p,{children:["The ",(0,s.jsx)(i.code,{children:"Button"})," component triggers a navigation event to transition from one view to another using the ",(0,s.jsx)(i.code,{children:"Router"})," class. For example:"]}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-java",metastring:'title="DemoView.java"',children:'private Button add = new Button("Add Customer", ButtonTheme.PRIMARY,\n  e -> Router.getCurrent().navigate(FormView.class));\n'})}),"\n",(0,s.jsx)(i.admonition,{type:"info",children:(0,s.jsxs)(i.p,{children:["The Router class uses the given class to resolve the route and build an URL to navigate to. All browser navigation is then handled so that history management\nand view initialization is of no concern.\nFor more details on navigation, see the ",(0,s.jsx)(i.a,{href:"../../routing/route-navigation",children:"Route Navigation Article"}),"."]})}),"\n",(0,s.jsx)(i.h3,{id:"table-editing",children:"Table editing"}),"\n",(0,s.jsxs)(i.p,{children:["In addition to navigation via button click, many apps also allow for navigation to other parts of an app when a ",(0,s.jsx)(i.code,{children:"Table"})," is double clicked. The following changes are made to allow users to double-click an item in the table to navigate to a form pre-filled with the item's details."]}),"\n",(0,s.jsxs)(i.p,{children:["Once the details have been edited on the appropriate screen, the changes are saved, and the ",(0,s.jsx)(i.code,{children:"Table"})," is updated to display the changed data from the selected item."]}),"\n",(0,s.jsxs)(i.p,{children:["To facilitate this navigation, item clicks in the table are handled by the ",(0,s.jsx)(i.code,{children:"TableItemClickEvent<Customer>"})," listener. The event contains the ",(0,s.jsx)(i.code,{children:"id"})," of the clicked customer, which it passes to the ",(0,s.jsx)(i.code,{children:"FormView"})," by utilizing the ",(0,s.jsx)(i.code,{children:"navigate()"})," method with a ",(0,s.jsx)(i.code,{children:"ParametersBag"}),":"]}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-java",metastring:'title="DemoView.java" ',children:'private void editCustomer(TableItemClickEvent<Customer> e) {\n  Router.getCurrent().navigate(FormView.class,\n    ParametersBag.of("id=" + e.getItemKey()));\n}\n'})}),"\n",(0,s.jsxs)(i.h3,{id:"handling-initialization-with-ondidenter",children:["Handling initialization with ",(0,s.jsx)(i.code,{children:"onDidEnter"})]}),"\n",(0,s.jsxs)(i.p,{children:["The ",(0,s.jsx)(i.code,{children:"onDidEnter"})," method in webforJ is part of the routing lifecycle and is triggered when a view becomes active."]}),"\n",(0,s.jsxs)(i.p,{children:["When the ",(0,s.jsx)(i.code,{children:"Router"})," navigates to a view, ",(0,s.jsx)(i.code,{children:"onDidEnter"})," is triggered as part of the lifecycle to:"]}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Load Data"}),": Initialize or fetch data required for the view based on route parameters."]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Set Up the View"}),": Update UI elements dynamically based on the context."]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"React to State Changes"}),": Perform actions that depend on the view being active, such as resetting forms or highlighting components."]}),"\n"]}),"\n",(0,s.jsxs)(i.p,{children:["The ",(0,s.jsx)(i.code,{children:"onDidEnter"})," method in ",(0,s.jsx)(i.code,{children:"FormView"})," checks for the presence of an ",(0,s.jsx)(i.code,{children:"id"})," parameter in the route and adjusts the form's behavior accordingly:"]}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Edit Mode"}),": If an ",(0,s.jsx)(i.code,{children:"id"})," is provided, the method fetches the corresponding customer\u2019s data using ",(0,s.jsx)(i.code,{children:"Service"})," and pre-fills the form fields. The ",(0,s.jsx)(i.code,{children:"Submit"})," button is configured to update the existing entry."]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.strong,{children:"Add Mode"}),": If no ",(0,s.jsx)(i.code,{children:"id"})," is present, the form remains blank, and the ",(0,s.jsx)(i.code,{children:"Submit"})," button is configured to create a new customer."]}),"\n"]}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-java",children:'@Override\n  public void onDidEnter(DidEnterEvent event, ParametersBag parameters) {\n    parameters.get("id").ifPresentOrElse(id -> {\n      customer = Service.getCurrent().getCustomerByKey(UUID.fromString(id));\n      firstName.setValue(customer.getFirstName());\n      lastName.setValue(customer.getLastName());\n      company.setValue(customer.getCompany());\n      country.selectKey(customer.getCountry());\n      submit.addClickListener(e -> submit("edit"));\n    }, () -> submit.addClickListener(e -> submit("add")));\n  }\n'})}),"\n",(0,s.jsx)(i.h3,{id:"submitting-data",children:"Submitting data"}),"\n",(0,s.jsxs)(i.p,{children:["When finished editing the data, it's necessary to submit it to the service handling the repository. Therefore the\n",(0,s.jsx)(i.code,{children:"Service"})," class that has been already set up in the previous step of this tutorial\nnow needs to be enhanced with additional methods, allowing users to add and edit customers."]}),"\n",(0,s.jsx)(i.p,{children:"The snippet below shows how to accomplish this:"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-java",metastring:'title="Service.java"',children:"public void addCustomer(Customer newCustomer) {\n  data.add(newCustomer);\n  repository.commit(newCustomer);\n}\n\npublic void editCustomer(Customer editedCustomer) {\n  repository.commit(editedCustomer);\n}\n"})}),"\n",(0,s.jsxs)(i.h3,{id:"using-commit",children:["Using ",(0,s.jsx)(i.code,{children:"commit()"})]}),"\n",(0,s.jsxs)(i.p,{children:["The ",(0,s.jsx)(i.code,{children:"commit()"})," method in the ",(0,s.jsx)(i.code,{children:"Repository"})," class keeps the app\u2019s data and UI in sync. It provides a mechanism to refresh the data stored in the ",(0,s.jsx)(i.code,{children:"Repository"}),", ensuring the latest state is reflected in the app."]}),"\n",(0,s.jsx)(i.p,{children:"This method can be used in two ways:"}),"\n",(0,s.jsxs)(i.ol,{children:["\n",(0,s.jsxs)(i.li,{children:["\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.strong,{children:"Refreshing all data:"}),"\nCalling ",(0,s.jsx)(i.code,{children:"commit()"})," without arguments reloads all entities from the repository's underlying data source, such as a database or a service class."]}),"\n"]}),"\n",(0,s.jsxs)(i.li,{children:["\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.strong,{children:"Refreshing a single entity:"}),"\nCalling ",(0,s.jsx)(i.code,{children:"commit(T entity)"})," reloads a specific entity, ensuring its state matches the latest data source changes."]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(i.p,{children:["Call ",(0,s.jsx)(i.code,{children:"commit()"})," when data in the ",(0,s.jsx)(i.code,{children:"Repository"})," changes, such as after adding or modifying entities in the data source."]}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-java",children:"// Refresh all customer data in the repository\ncustomerRepository.commit();\n\n// Refresh a single customer entity\nCustomer updatedCustomer = ...; // Updated from an external source\ncustomerRepository.commit(updatedCustomer);\n\n"})}),"\n",(0,s.jsx)(i.p,{children:"With these changes, the following goals have been achieved:"}),"\n",(0,s.jsxs)(i.ol,{children:["\n",(0,s.jsx)(i.li,{children:"Implemented routing and set it up so future views can be integrated with little effort."}),"\n",(0,s.jsxs)(i.li,{children:["Removed UI implementations out of the ",(0,s.jsx)(i.code,{children:"App"})," and into a separate view."]}),"\n",(0,s.jsx)(i.li,{children:"Added an additional view to manipulate the data that's displayed in the customer table."}),"\n"]}),"\n",(0,s.jsx)(i.p,{children:"With the modification of the customer details and routing accomplished, the next step will focus on\nimplementing data binding and using it to facilitate validation."})]})}function h(e={}){const{wrapper:i}={...(0,o.R)(),...e.components};return i?(0,s.jsx)(i,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}},59936:(e,i,n)=>{n.d(i,{A:()=>t});const t=n.p+"assets/images/step3-1-1b7f3bd0608ef404f8ce370a3bed2231.png"},41147:(e,i,n)=>{n.d(i,{A:()=>t});const t=n.p+"assets/images/step3-2-1a691929aca30981e66e5da8e6b490b2.png"},28453:(e,i,n)=>{n.d(i,{R:()=>a,x:()=>r});var t=n(96540);const s={},o=t.createContext(s);function a(e){const i=t.useContext(o);return t.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function r(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),t.createElement(o.Provider,{value:i},e.children)}}}]);