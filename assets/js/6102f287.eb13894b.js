"use strict";(self.webpackChunkdwcj_documentation=self.webpackChunkdwcj_documentation||[]).push([[9901],{3622:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>s,default:()=>l,frontMatter:()=>i,metadata:()=>o,toc:()=>c});var a=n(4848),r=n(8453);const i={sidebar_position:7,title:"State Management"},s=void 0,o={id:"routing/state-managmenet",title:"State Management",description:"Creating seamless, dynamic user experiences often requires that the state of your web app be reflected in the URL and retained across browser navigation events. You can achieve this without reloading the page by leveraging URL parameter updates and browser history state management. This ensures that users can share, bookmark, or return to specific views with the app fully aware of their prior interactions.",source:"@site/docs/routing/state-managmenet.md",sourceDirName:"routing",slug:"/routing/state-managmenet",permalink:"/docs/routing/state-managmenet",draft:!1,unlisted:!1,editUrl:"https://github.com/webforj/webforj-docs/tree/website/docs/routing/state-managmenet.md",tags:[],version:"current",sidebarPosition:7,frontMatter:{sidebar_position:7,title:"State Management"},sidebar:"documentationSidebar",previous:{title:"Query Parameters",permalink:"/docs/routing/query-parameters"},next:{title:"Navigation Lifecycle",permalink:"/docs/routing/navigation-lifecycle/overview"}},d={},c=[{value:"Updating the URL",id:"updating-the-url",level:3},{value:"Example: Updating the URL with query parameters",id:"example-updating-the-url-with-query-parameters",level:3},{value:"Explanation:",id:"explanation",level:3},{value:"Saving and restoring state in browser history",id:"saving-and-restoring-state-in-browser-history",level:2},{value:"Example: Saving selection state",id:"example-saving-selection-state",level:3},{value:"Explanation:",id:"explanation-1",level:3}];function h(e){const t={code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.p,{children:"Creating seamless, dynamic user experiences often requires that the state of your web app be reflected in the URL and retained across browser navigation events. You can achieve this without reloading the page by leveraging URL parameter updates and browser history state management. This ensures that users can share, bookmark, or return to specific views with the app fully aware of their prior interactions."}),"\n",(0,a.jsx)(t.h3,{id:"updating-the-url",children:"Updating the URL"}),"\n",(0,a.jsxs)(t.p,{children:["When the state of a web page changes, like filtering a product list or navigating through different views, you often need the URL to reflect those changes. You can use the ",(0,a.jsx)(t.code,{children:"replaceState"})," or ",(0,a.jsx)(t.code,{children:"pushState"})," methods provided by the ",(0,a.jsx)(t.code,{children:"BrowserHistory"})," class to manipulate the URL without reloading the page:"]}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.strong,{children:(0,a.jsx)(t.code,{children:"pushState"})}),": Adds a new entry to the browser\u2019s history stack without reloading the page. This is useful for navigating between different views or dynamic content."]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.strong,{children:(0,a.jsx)(t.code,{children:"replaceState"})}),": Updates the current entry in the browser\u2019s history without adding a new entry. This is ideal for updating state within the same view."]}),"\n"]}),"\n",(0,a.jsx)(t.h3,{id:"example-updating-the-url-with-query-parameters",children:"Example: Updating the URL with query parameters"}),"\n",(0,a.jsxs)(t.p,{children:['In this example, when the "Update URL" button is clicked, the UI is updated to show the selected category and sorting, and the URL is updated with new query parameters for ',(0,a.jsx)(t.code,{children:"category"})," and ",(0,a.jsx)(t.code,{children:"sort"}),":"]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-java",children:'@Route(value = "products")\npublic class ProductView extends Composite<Div> {\n  Paragraph paragraph = new Paragraph();\n  Random random = new Random();\n\n  public ProductView() {\n    Button update = new Button("Update URL", ButtonTheme.PRIMARY);\n    update.onClick(ev -> {\n      filter("electronics", String.valueOf(random.nextInt(3) - 1));\n    });\n\n    Div div = getBoundComponent();\n    div.add(update);\n    div.add(paragraph);\n  }\n\n  public void filter(String category, String sort) {\n    // update the UI\n    updateUI(category, sort);\n\n    // update the URL\n    updateUrl(category, sort);\n  }\n\n  private void updateUI(String category, String sort) {\n    paragraph.setText("Viewing category: " + category + " and sorting by: " + sort);\n  }\n\n  private void updateUrl(String category, String sort) {\n    ParametersBag queryParameters = new ParametersBag();\n    queryParameters.put("category", category);\n    queryParameters.put("sort", sort);\n\n    Location newLocation = new Location("/products?" + queryParameters.getQueryString());\n    Router.getCurrent().getHistory()\n        // Update the URL without reloading the page\n        .replaceState(null, newLocation);\n  }\n}\n'})}),"\n",(0,a.jsx)(t.h3,{id:"explanation",children:"Explanation:"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsxs)(t.li,{children:[(0,a.jsxs)(t.strong,{children:[(0,a.jsx)(t.code,{children:"filter"})," Method"]}),": The method handles updating both the UI and the URL based on the selected ",(0,a.jsx)(t.code,{children:"category"})," and ",(0,a.jsx)(t.code,{children:"sort"}),"."]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsxs)(t.strong,{children:[(0,a.jsx)(t.code,{children:"updateUrl"})," Method"]}),": This method creates a new ",(0,a.jsx)(t.code,{children:"ParametersBag"})," for query parameters, constructs a new URL, and then uses ",(0,a.jsx)(t.code,{children:"replaceState"})," to update the browser's URL without reloading the page."]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.strong,{children:(0,a.jsx)(t.code,{children:"replaceState"})}),": This method changes the URL to the new location while maintaining the current state, without causing a page reload."]}),"\n"]}),"\n",(0,a.jsx)(t.h2,{id:"saving-and-restoring-state-in-browser-history",children:"Saving and restoring state in browser history"}),"\n",(0,a.jsx)(t.p,{children:"In addition to updating the URL, it's possible to save arbitrary state objects in the browser's history. This means you can stash additional data related to the current view (for instance: form inputs, filters, etc.) without embedding them directly into the URL."}),"\n",(0,a.jsx)(t.h3,{id:"example-saving-selection-state",children:"Example: Saving selection state"}),"\n",(0,a.jsxs)(t.p,{children:["In the following example, a ",(0,a.jsx)(t.code,{children:"ProfileView"})," consists of several tabs (Profile, Orders and Settings). When the user switches between tabs, the selected tab\u2019s state is saved in the browser\u2019s history using ",(0,a.jsx)(t.code,{children:"replaceState"}),". This allows the app to remember the last active tab if the user navigates back to this view or refreshes the page."]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-java",children:'@Route(value = "profile")\npublic class ProfileView extends Composite<Div> implements DidEnterObserver {\n  TabbedPane sections = new TabbedPane();\n  int currentSection = 0;\n\n  public ProfileView() {\n    sections.addTab("Profile");\n    sections.addTab("Orders");\n    sections.addTab("Settings");\n\n    sections.onSelect(ev -> {\n      currentSection = ev.getTabIndex();\n       // Save the state using replaceState\n      updateState(currentSection);\n    });\n\n    getBoundComponent().add(sections);\n  }\n\n  @Override\n  public void onDidEnter(DidEnterEvent event, ParametersBag parameters) {\n    // Try to retrieve the last saved section from the browser history state\n    Optional<Integer> lastSavedSection = event.getState(Integer.class);\n\n    // If a section was saved, restore the tab selection\n    lastSavedSection.ifPresent(section -> sections.select(section));\n  }\n\n  private void updateState(int section) {\n    Router router = Router.getCurrent();\n    Location currentLocation = router.getHistory().getLocation().get();\n\n    // Update the current state with the selected section\n    Router.getCurrent().getHistory()\n        .replaceState(section, currentLocation);\n  }\n}\n'})}),"\n",(0,a.jsx)(t.h3,{id:"explanation-1",children:"Explanation:"}),"\n",(0,a.jsxs)(t.ol,{children:["\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.strong,{children:"TabbedPane Component"}),": The view consists of a ",(0,a.jsx)(t.code,{children:"TabbedPane"})," component, which has three tabs: Profile, Orders, and Settings."]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.strong,{children:"State Saving on Tab Change"}),": Each time a tab is selected, the current section index is saved in the browser\u2019s history using the ",(0,a.jsx)(t.code,{children:"replaceState"})," method."]}),"\n",(0,a.jsxs)(t.li,{children:[(0,a.jsx)(t.strong,{children:"Restoring State on Navigation"}),": When the user navigates back to the ",(0,a.jsx)(t.code,{children:"ProfileView"}),", the app retrieves the saved section from the history using ",(0,a.jsx)(t.code,{children:"event.getState()"})," and restores the correct tab selection."]}),"\n"]})]})}function l(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(h,{...e})}):h(e)}}}]);